# サステナビリティの柱 (Sustainability)

## 1. 柱の概要

サステナビリティの柱は、クラウドワークロードの実行による環境への影響を理解し、その影響を最小化することに焦点を当てる。
2021 年に AWS Well-Architected フレームワークの 6 番目の柱として追加された最も新しい柱である。
クラウドワークロードのライフサイクル全体を通じて環境への影響を測定し、設計原則とベストプラクティスを適用して影響を低減することを目的とする。
AWS はサステナビリティに対する責任共有モデルを採用しており、AWS がクラウド「の」サステナビリティを、利用者がクラウド「における」サステナビリティをそれぞれ担う。

## 2. 設計原則

サステナビリティの柱には 6 つの設計原則がある。

### 影響を理解する (Understand your impact)

クラウドワークロードの影響を測定し、将来の影響をモデル化する。
顧客による製品利用や最終的な廃止・廃棄による影響を含め、すべての影響源を把握する。
作業単位あたりの必要リソースと排出量を確認し、KPI を設定して生産性の向上と影響の低減を両立する。

### サステナビリティの目標を設定する (Establish sustainability goals)

ワークロードごとに長期的なサステナビリティ目標を設定する。
トランザクションあたりのコンピューティングリソースやストレージリソースの削減など、具体的な指標を定める。
成長に伴いユーザーあたりやトランザクションあたりの影響強度が低下するようアーキテクチャを設計する。

### 使用率を最大化する (Maximize utilization)

ワークロードを適正サイズに設定し、効率的な設計で高い使用率を維持する。
ベースライン電力消費を考慮し、アイドル状態のリソースを削減または最小化する。
例えば、30% の使用率で稼働する 2 台のホストよりも、60% の使用率で稼働する 1 台のホストの方がエネルギー効率が高い。

### より効率的なハードウェアやソフトウェアの新しいオファリングを予測して採用する (Anticipate and adopt new, more efficient hardware and software offerings)

パートナーやサプライヤーによる改善を活用し、ワークロードの環境負荷を低減する。
新しい効率的なハードウェアやソフトウェアのオファリングを継続的にモニタリングし評価する。
新しい効率的なテクノロジーを迅速に採用できるよう柔軟性を持った設計にする。

### マネージドサービスを使用する (Use managed services)

幅広い顧客ベースでサービスを共有することでリソース使用率を最大化し、ワークロードのサポートに必要なインフラストラクチャの量を削減する。
AWS Fargate、Amazon S3 Lifecycle、Amazon EC2 Auto Scaling などのマネージドサービスを活用し、インフラストラクチャの効率的な運用を実現する。
共通のデータセンターコンポーネント（電力やネットワーク等）を共有することで、個々のワークロードの環境負荷を低減できる。

### クラウドワークロードのダウンストリームの影響を軽減する (Reduce the downstream impact of your cloud workloads)

サービスの利用に必要なエネルギーやリソースの量を削減する。
顧客がサービスを利用するためにデバイスをアップグレードする必要性を減らす。
デバイスファームを使用してテストし、期待される影響と実際の影響を把握する。

## 3. チェックポイント

### SUS-1: リージョンの選択

ワークロードのリージョン選択にサステナビリティの観点が含まれているかを確認する。

- Amazon が再生可能エネルギープロジェクトを推進しているリージョンが選択候補に含まれているか
- ビジネス要件（レイテンシー、データ主権）とサステナビリティの目標のバランスが考慮されているか
- カーボンフットプリントの低いリージョンを選択するための評価基準が定義されているか
- AWS Customer Carbon Footprint Tool を活用して排出量を可視化しているか

### SUS-2: ユーザーの動作パターン（需要への整合）

リソースの供給が実際の需要に適切に合致しているかを確認する。

- Auto Scaling が適切に設定され、需要に応じてリソースが動的にスケーリングされるか
- 開発・テスト環境が営業時間外に停止されているか
- アイドル状態のリソース（未使用の EC2 インスタンス、未アタッチの EBS ボリューム等）が定期的に棚卸しされているか
- バッファベースのアプローチ（SQS キュー等）を使用して需要を平準化しているか
- サービスレベル目標（SLO）がサステナビリティの目標と整合しているか

### SUS-3: ソフトウェアとアーキテクチャのパターン

ソフトウェアとアーキテクチャの設計がサステナビリティの目標を支援しているかを確認する。

- 非同期処理やイベント駆動アーキテクチャにより、リソースのアイドル時間が最小化されているか
- マイクロサービスやコンテナアーキテクチャにより、必要なコンポーネントのみがスケーリングされるか
- サーバーレスアーキテクチャ（Lambda、Fargate）が適切に活用されているか
- コードの最適化（効率的なアルゴリズム、不要な処理の排除）が実施されているか
- キャッシュ戦略（CloudFront、ElastiCache）によりオリジンへのリクエスト数が削減されているか

### SUS-4: データパターン

データ管理のポリシーとパターンがサステナビリティの目標を支援しているかを確認する。

- データライフサイクルポリシーが定義され、S3 Lifecycle や S3 Intelligent-Tiering が設定されているか
- 不要なデータ（一時ファイル、古いログ、重複データ）が定期的に削除されているか
- データ圧縮が適用されストレージ使用量が最小化されているか
- 不要なデータ転送（リージョン間、AZ 間）が最小化されているか
- データアクセスパターンに基づいた適切なストレージクラスが選択されているか
- データの保持期間が明確に定義され、自動削除が設定されているか

### SUS-5: ハードウェアパターン

ハードウェアとサービスの選択がサステナビリティの目標を支援しているかを確認する。

- Graviton ベースのインスタンスが検討されているか（電力効率が最大 60% 優れている）
- マネージドサービス（RDS、DynamoDB、Aurora Serverless 等）が自前運用よりも優先されているか
- インスタンスの適正サイジング（Right Sizing）が定期的に実施されているか
- AWS Compute Optimizer の推奨事項が確認・適用されているか
- Spot Instances の活用により、余剰キャパシティが有効利用されているか
- 最新世代のインスタンスタイプが使用されているか（新世代ほどエネルギー効率が高い）

### SUS-6: 開発とデプロイのプロセス

組織のプロセスがサステナビリティの目標を支援しているかを確認する。

- CI/CD パイプラインが効率的に構成され、不要なビルドやテストの実行が排除されているか
- Infrastructure as Code（IaC）により、環境の作成と破棄が自動化されているか
- サステナビリティの KPI がモニタリングされ、改善サイクルが回っているか
- 開発チームがサステナビリティのベストプラクティスについてトレーニングを受けているか
- AWS Customer Carbon Footprint Tool でカーボンフットプリントが定期的にレビューされているか

## 4. リポジトリとの対応関係

サステナビリティの柱は他の 5 つの柱すべてと横断的に関連する。
特にコスト最適化の柱とは、リソース効率の向上という点で多くの施策が共通する。
以下に本リポジトリの設計書との対応関係を示す。

| 設計書 | サステナビリティとの関連 |
|--------|--------------------------|
| cloud-design-common.md | リージョン選択の判断基準にサステナビリティ観点を含めるか |
| cloud-design-availability.md | 可用性要件と資源効率のバランス（過剰な冗長構成の回避） |
| cloud-design-network.md | 不要なデータ転送の削減、CloudFront によるキャッシュ活用 |
| cloud-design-monitoring.md | サステナビリティ KPI の監視、リソース使用率の可視化 |
| cloud-design-backup.md | バックアップデータのライフサイクル管理、不要なバックアップの削除 |
| cloud-design-deployprovisioning.md | IaC による効率的な環境管理、不要な環境の自動削除 |
| cloud-design-log.md | ログの保持期間設定、不要ログの自動削除 |
| cloud-design-security.md | セキュリティ要件とのトレードオフ（暗号化処理の計算コスト等） |
| cloud-design-configurationmanagement.md | 構成の最適化によるリソース効率の向上 |

## 5. よくある指摘事項

以下はレビュー時に頻出するサステナビリティに関するアンチパターンである。
これらの指摘は他の柱（特にコスト最適化やパフォーマンス効率）の改善にもつながることが多い。

| # | 指摘事項 | 改善の方向性 |
|---|----------|--------------|
| 1 | リージョン選択にサステナビリティの観点が含まれていない | AWS Customer Carbon Footprint Tool を活用し、<br />再生可能エネルギー利用率の高いリージョンを評価基準に追加する |
| 2 | アイドル状態のリソースが長時間稼働している | AWS Instance Scheduler や Auto Scaling を導入し、<br />開発・テスト環境の営業時間外停止を実装する |
| 3 | データのライフサイクルポリシーが未設定 | S3 Lifecycle ポリシーや S3 Intelligent-Tiering を設定し、<br />アクセス頻度に応じたストレージクラスの自動移行を実装する |
| 4 | Graviton ベースのインスタンスが未検討 | Graviton インスタンスは同等性能で電力効率が優れているため、<br />ワークロードの互換性を確認し移行を検討する |
| 5 | マネージドサービスよりも自前運用が優先されている | RDS、Aurora Serverless、Fargate 等のマネージドサービスに<br />移行し、インフラストラクチャの共有による効率化を図る |
| 6 | 不要なデータ転送が発生している | VPC エンドポイントの活用、CloudFront によるキャッシュ、<br />同一 AZ 内通信の優先により転送量を削減する |
| 7 | 最新世代のインスタンスタイプが使用されていない | 新世代インスタンスはエネルギー効率が向上しているため、<br />AWS Compute Optimizer の推奨に基づき移行を計画する |
| 8 | ログやバックアップの保持期間が無期限に設定されている | 法規制やビジネス要件に基づいた保持期間を定義し、<br />自動削除ポリシーを設定する |
| 9 | サステナビリティの KPI が定義・モニタリングされていない | ワークロード単位あたりのリソース消費量を KPI として設定し、<br />CloudWatch ダッシュボードで継続的にモニタリングする |
| 10 | 開発・テスト環境が本番環境と同等のスペックで稼働している | 開発・テスト環境は必要最小限のスペックに縮小し、<br />Spot Instances の活用も検討する |
