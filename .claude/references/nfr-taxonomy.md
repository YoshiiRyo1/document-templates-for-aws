# 非機能要件カテゴリ定義

## 概要

本プロジェクトでは、IPA（独立行政法人 情報処理推進機構）の「非機能要求グレード」の 6 大項目を基盤とし、AWS Well-Architected フレームワーク（以下 W-A）の 6 本の柱の観点を統合した 7 カテゴリのハイブリッド体系で非機能要件を定義する。
IPA 体系を採用する理由は、日本の SI 現場で最も広く使われている非機能要件の分類であり、顧客との共通言語として機能するためである。
W-A の観点を加える理由は、AWS 上での設計判断に直結するベストプラクティスを網羅するためである。

## IPA - W-A マッピング

| #   | カテゴリ         | IPA 非機能要求グレード | W-A の柱（主）     | W-A の柱（副） |
| --- | ---------------- | ---------------------- | ------------------ | -------------- |
| 1   | 可用性           | 可用性                 | 信頼性             | ―              |
| 2   | 性能・拡張性     | 性能・拡張性           | パフォーマンス効率 | ―              |
| 3   | 運用・保守性     | 運用・保守性           | 運用上の優秀性     | ―              |
| 4   | 移行性           | 移行性                 | 運用上の優秀性     | 信頼性         |
| 5   | セキュリティ     | セキュリティ           | セキュリティ       | ―              |
| 6   | 環境・エコロジー | 環境・エコロジー       | サステナビリティ   | ―              |
| 7   | コスト最適化     | ―（W-A で追加）        | コスト最適化       | ―              |

IPA の 6 大項目に含まれない「コスト最適化」を 7 番目として追加する。
AWS 利用ではコストがアーキテクチャ選定に直結するため、独立したカテゴリとして扱う。

---

## 1. 可用性

### 定義

システムが必要なときに利用可能な状態を維持する能力。
IPA では「継続性」「耐障害性」「災害対策」「回復性」を含む。
W-A 信頼性の柱では、障害からの自動復旧、水平スケーリング、キャパシティの推測排除を重視する。

### 小項目

| 小項目       | 説明                                   | 主な検討事項                                               |
| ------------ | -------------------------------------- | ---------------------------------------------------------- |
| 継続性       | システムの稼働率目標と運用スケジュール | 稼働率 SLA、運用時間帯、計画停止の定義                     |
| 耐障害性     | 障害発生時にサービスを継続する能力     | Multi-AZ/Multi-Region 構成、フェイルオーバー、自動復旧     |
| 災害対策     | 大規模災害時の復旧計画                 | RPO/RTO/RLO、DR サイト、切り替え判断基準、切り替え猶予時間 |
| バックアップ | データの保全と復元                     | 対象、方式、保存期間・世代、リストア粒度                   |

### AWS での設計観点

- Multi-AZ 構成による可用性向上（EC2、RDS、ElastiCache 等）
- Auto Scaling による自動復旧
- Route 53 ヘルスチェックによるフェイルオーバー
- AWS Backup による一元的なバックアップ管理
- Pilot Light / Warm Standby / Multi-Site Active-Active の DR パターン選択

---

## 2. 性能・拡張性

### 定義

システムが要求された性能を発揮し、需要変動に対応できる能力。
IPA では「業務処理量」「性能目標値」「リソース拡張性」を含む。
W-A パフォーマンス効率の柱では、最新技術の活用、グローバル展開、サーバーレスアーキテクチャの採用を重視する。

### 小項目

| 小項目         | 説明                                             | 主な検討事項                                                      |
| -------------- | ------------------------------------------------ | ----------------------------------------------------------------- |
| 業務処理量     | システムが処理すべきデータ・トランザクションの量 | 同時接続数、データ量、トランザクション量、ピーク時の負荷特性      |
| 性能目標値     | 応答時間やスループットの目標                     | レスポンスタイム、スループット、IOPS、ネットワーク帯域            |
| リソース拡張性 | 需要変動への対応能力                             | スケールアップ/ダウン、スケールイン/アウト、Auto Scaling ポリシー |
| 性能品質保証   | 性能要件の検証と維持                             | 性能テスト計画、ベンチマーク、継続的モニタリング                  |

### AWS での設計観点

- インスタンスタイプ・ボリュームタイプの適切な選定
- Auto Scaling（EC2、ECS、Lambda、DynamoDB）による弾力的なスケーリング
- CloudFront / ElastiCache によるレイテンシ削減
- RDS リードレプリカ、DynamoDB DAX によるデータベース性能向上
- 負荷テスト（Distributed Load Testing on AWS 等）による性能検証

---

## 3. 運用・保守性

### 定義

システムの安定稼働を維持し、継続的に改善していくための運用・保守の能力。
IPA では「通常運用」「保守運用」「障害時運用」「運用環境」を含む。
W-A 運用上の優秀性の柱では、運用のコード化（IaC）、小規模で頻繁な変更、障害の予測と対応を重視する。

### 小項目

| 小項目     | 説明                           | 主な検討事項                                                |
| ---------- | ------------------------------ | ----------------------------------------------------------- |
| 通常運用   | 日常的な運用業務               | ジョブ管理、監視、ログ管理、通知・アラート                  |
| 保守運用   | システムの保全と更新           | パッチ管理、構成管理、手順書管理                            |
| 障害時運用 | 障害発生時の対応体制と手順     | インシデント管理、エスカレーション、Runbook                 |
| 運用体制   | 運用を担う組織と人材           | 要員、スキル、サポート体制、CCoE/SRE                        |
| デプロイ   | アプリケーションのリリース管理 | CI/CD パイプライン、IaC、デプロイ戦略（Blue/Green、Canary） |
| 継続的改善 | 運用品質の向上サイクル         | 運用レビュー、ポストモーテム、ナレッジ共有                  |

### AWS での設計観点

- CloudWatch / CloudWatch Logs による統合監視
- Systems Manager（Run Command、Patch Manager、Automation）による運用自動化
- CodePipeline / CodeDeploy による CI/CD
- CloudFormation / CDK による IaC
- EventBridge + Lambda によるイベント駆動型の自動対応

---

## 4. 移行性

### 定義

既存システムから新環境へ移行する際の容易さと確実性。
IPA では「移行期間」「移行方式」「移行対象」を含む。
W-A では運用上の優秀性（変更管理）と信頼性（変更管理）の両柱に関連する。

### 小項目

| 小項目         | 説明                               | 主な検討事項                                               |
| -------------- | ---------------------------------- | ---------------------------------------------------------- |
| 移行計画       | 移行全体の方針と戦略               | リフト&シフト/リプラットフォーム/リファクタリングの選択    |
| 移行期間       | 移行に要するスケジュールと並行稼動 | 並行稼動期間、切り替え計画、切り戻し手順                   |
| データ移行     | データの移行方式と整合性確保       | 移行対象データ、移行ツール（DMS、DataSync 等）、整合性確認 |
| 移行リハーサル | 移行手順の事前検証                 | テスト計画、実行、検証、課題の洗い出し                     |

### AWS での設計観点

- AWS Migration Hub による移行の一元管理
- AWS Application Migration Service（MGN）によるリフト&シフト
- AWS Database Migration Service（DMS）によるデータベース移行
- AWS DataSync / AWS Transfer Family によるデータ転送
- 移行前のポートフォリオ評価（AWS Migration Evaluator）

---

## 5. セキュリティ

### 定義

情報資産の機密性・完全性・可用性を保護する能力。
IPA では「アクセス制御」「データ保護」「不正追跡・監視」「ネットワーク対策」を含む。
W-A セキュリティの柱では、最小権限の原則、全レイヤーでの防御、トレーサビリティの確保を重視する。

### 小項目

| 小項目                   | 説明                     | 主な検討事項                                            |
| ------------------------ | ------------------------ | ------------------------------------------------------- |
| アクセス制御             | 認証・認可の設計         | IAM 設計、MFA、最小権限、フェデレーション               |
| データ保護               | データの暗号化と分類     | 保管時・転送時の暗号化、データ分類、KMS キー管理        |
| ネットワークセキュリティ | ネットワーク境界の防御   | VPC 設計、Security Group、WAF/Shield、接続元制限        |
| セキュリティ監視         | 脅威の検知と追跡         | GuardDuty、Security Hub、CloudTrail、SIEM 連携          |
| コンプライアンス         | 規制・基準への準拠       | 業界規制（PCI DSS、HIPAA 等）、定期チェック、脆弱性診断 |
| インシデント対応         | セキュリティ事象への対処 | 対応手順、フォレンジック、報告体制、再発防止            |

### AWS での設計観点

- IAM ポリシーの最小権限設計と IAM Identity Center による一元管理
- KMS / CloudHSM による暗号鍵管理
- GuardDuty / Security Hub / Detective による脅威検知と調査
- WAF / Shield Advanced によるウェブアプリケーション保護
- Config Rules / Conformance Packs による継続的コンプライアンス監視

---

## 6. 環境・エコロジー

### 定義

システムが稼働する基盤環境の構成と、環境負荷への配慮。
IPA では「システム環境」「エコロジー」を含む。
W-A サステナビリティの柱では、環境影響の理解、持続可能性の目標設定、効率の最大化を重視する。

### 小項目

| 小項目           | 説明                             | 主な検討事項                                             |
| ---------------- | -------------------------------- | -------------------------------------------------------- |
| システム環境     | インフラ基盤の構成               | AWS アカウント構成、ネットワークトポロジ、ドメイン管理   |
| ライセンス管理   | ソフトウェアライセンスの取り扱い | BYOL、クラウドライセンス体系、並行稼動時の扱い           |
| サステナビリティ | 環境負荷の低減                   | リージョン選択、リソース効率化、データライフサイクル管理 |

### AWS での設計観点

- AWS Organizations / Control Tower によるマルチアカウント管理
- License Manager によるライセンス追跡
- 再生可能エネルギーを活用するリージョンの選択
- Graviton インスタンスによるエネルギー効率向上
- S3 Intelligent-Tiering / Glacier によるデータライフサイクル管理

---

## 7. コスト最適化

### 定義

ビジネス価値を最大化しながら、不要なコストを排除する能力。
IPA の 6 大項目には含まれないが、AWS 上のシステムではアーキテクチャ選定がコストに直結するため独立カテゴリとする。
W-A コスト最適化の柱では、クラウド財務管理の実践、支出と使用量の認識、費用対効果の高いリソース選択を重視する。

### 小項目

| 小項目         | 説明                         | 主な検討事項                                                              |
| -------------- | ---------------------------- | ------------------------------------------------------------------------- |
| 予算管理       | コストの上限設定と進捗管理   | 予算設定、消費アラート、承認プロセス                                      |
| コスト可視化   | 利用状況と費用の把握         | 内訳分析、タグによる配分、レポーティング                                  |
| リソース最適化 | コスト効率の高いリソース選択 | Right Sizing、購入オプション（RI/Savings Plans/Spot）、未使用リソース削除 |
| 需要管理       | 需要変動に応じたコスト制御   | 需要予測、スケジューリング（夜間停止等）、サーバーレス活用                |

### AWS での設計観点

- AWS Budgets によるコストアラートと予算管理
- Cost Explorer / Cost and Usage Report（CUR）によるコスト分析
- Compute Optimizer / Trusted Advisor による Right Sizing 推奨
- Reserved Instances / Savings Plans による長期コスト削減
- 開発環境の夜間・休日停止による無駄の排除

---

## 利用ガイドライン

### survey（ヒアリングシート）作成時

- 本体系の 7 カテゴリを中項目（`##`）とし、小項目を `###` として構成する
- 各カテゴリの「主な検討事項」を質問設計の出発点とする
- 既存 survey との対応関係を参考に、既存質問の再利用と不足分の追加を判断する

### design（設計書）作成時

- 非機能要件の設計項目が 7 カテゴリのどれに該当するかを意識して整理する
- 「AWS での設計観点」を設計判断の根拠として活用する
- 「既存テンプレートとの対応」を参照して関連する設計書を確認する

### wa-review（レビュー）時

- 本体系の IPA - W-A マッピングを参照し、レビュー対象がどのカテゴリに該当するかを特定する
- W-A の柱ごとのチェックポイント（`.claude/skills/wa-review/references/`）と組み合わせて使用する

### 非機能要件についての議論時

- カテゴリ名と小項目名を共通用語として使用し、認識のずれを防ぐ
- IPA と W-A の両方の観点からバランスの取れた議論を行う
