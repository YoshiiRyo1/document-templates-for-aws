# パフォーマンス効率 (Performance Efficiency)

## 性能目標値

| 質問                                                                         | 質問の意図                                                                                   | ご回答 |
| ---------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------- | ------ |
| オンライン処理、バッチ処理に求められている性能目標値があればご教示ください。 | アーキテクチャやインスタンスタイプ、ボリュームタイプ選定に影響するようであれば把握しておく。 |        |
| 保管するデータ量、データベースのデータ量をデータ種別ごとにご教示ください。   | アーキテクチャやインスタンスタイプ、ボリュームタイプ選定に影響するようであれば把握しておく。 |        |
| 必要とする IOPS をアプリケーションごと、データベースごとにご教示ください。   | アーキテクチャやインスタンスタイプ、ボリュームタイプ選定に影響するようであれば把握しておく。 |        |
| 外部システム連携がある場合、必要なネットワーク帯域をご教示ください。         | 常時一定の帯域が必要な場合は帯域保証の Direct Connect を検討。                               |        |
| レスポンスタイムの目標値をパーセンタイルで定義していますか？<br />（P50 / P95 / P99） | 平均値だけでなくパーセンタイルで定義することで、ユーザー体験のばらつきを把握できる。<br />CloudWatch Application Signals で P50/P95/P99 レイテンシを自動計測できる。 |        |
| 同時接続数やスループット（リクエスト/秒）の目標値はありますか？ | 目標値に応じて ELB、Auto Scaling、Lambda の同時実行数の設定を設計する。<br />API Gateway のスロットリング設定にも影響する。 |        |
| データベースの読み書き比率やクエリパターンを把握していますか？ | 読み取りが多い場合は Read Replica や ElastiCache でオフロードする。<br />Aurora Serverless v2 は変動する負荷に自動でスケールする。<br />DAX は DynamoDB のマイクロ秒レベルの読み取りキャッシュを提供する。 |        |
| API のレートリミットやスロットリング要件はありますか？ | API Gateway でリクエストレート制限やバースト制限を設定できる。<br />外部 API を呼び出す場合は相手側のレート制限も考慮する。 |        |

## 拡張性・スケーリング

| 質問                                                                                                                                                                            | 質問の意図                                                                                                                                                      | ご回答 |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ |
| スケールアップ/ダウンを行う指標はございますか？                                                                                                                                 | リサイズ方式に影響する。基本的にリサイズにはサービス停止が伴う。                                                                                                |        |
| スケールイン/アウトを行えるようなアプリケーションを採用していますか？                                                                                                           | Auto Scaling に対応しているかはアーキテクチャに影響する。また、マネージドサービスのスケールに対応できるアプリケーションが望ましい。<br />Aurora Serverless v2、ElastiCache Serverless、Lambda SnapStart、App Runner 等のサーバーレス/オートスケール対応サービスも検討する。                              |        |
| アプリケーションごとの負荷特性をご教示ください。<br />・季節によって負荷が変わる<br />・テレビや SNS で宣伝すると負荷が急上昇する<br />・月次処理が走ると負荷が上がる<br />など | スケーリング方式に影響する。いつどのようなタイミングでスケールすべきかを予め把握する。                                                                          |        |
| 性能テストの要否をご教示ください。                                                                                                                                              | テスト方式に影響する。                                                                                                                                          |        |
| アプリケーションがDNS名を利用したサービス間接続に対応していますか？                                                                                                             | 可用性を上げるためMulti-AZ、ELB利用時などのスムーズな正常インスタンスへの切り替えに影響する。IPアドレスだと対象ノード障害時に接続先設定変更が必要な場合がある。 |        |
| グローバルにユーザーがいる場合、地理的なパフォーマンス要件はありますか？ | CloudFront で静的・動的コンテンツを世界中のエッジロケーションからキャッシュ配信できる。<br />Global Accelerator で TCP/UDP トラフィックを最寄りのリージョンにルーティングできる。 |        |
| コンテナやサーバーレスの採用方針はありますか？ | ECS / EKS でコンテナ化し、Fargate でサーバーレスに運用できる。<br />App Runner で Web アプリケーションを簡易にデプロイ・スケールできる。<br />Lambda はイベント駆動処理に適しており、Lambda SnapStart で Java・Python・.NET の起動時間を短縮できる。 |        |

## キャッシュ戦略

| 質問                                                                         | 質問の意図                                                                                   | ご回答 |
| ---------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------- | ------ |
| アプリケーションにおけるキャッシュ活用の要件はありますか？ | ElastiCache（Redis / Memcached）でセッション管理やクエリ結果のキャッシュが可能。<br />ElastiCache Serverless で容量管理不要のキャッシュを利用できる。<br />DynamoDB DAX でマイクロ秒レベルの読み取りキャッシュを実現できる。 |        |
| キャッシュの無効化ポリシーや TTL の要件はありますか？ | データの鮮度要件に応じてキャッシュの TTL（Time To Live）を設定する。<br />キャッシュ無効化のタイミングやトリガーを設計に反映する。 |        |
| CDN（コンテンツ配信ネットワーク）の活用要件はありますか？ | CloudFront で静的コンテンツのキャッシュ配信、動的コンテンツの高速化が可能。<br />S3 Express One Zone で低レイテンシのデータアクセスを実現できる。<br />オリジンシールドでオリジンへの負荷を軽減できる。 |        |

## テスト要件

| 質問                                                                         | 質問の意図                                                                                   | ご回答 |
| ---------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------- | ------ |
| 負荷テスト・ストレステスト・耐久テストの実施要件はありますか？ | 本番環境相当の負荷をかけてボトルネックを特定する。<br />AWS では事前のペネトレーションテスト申請は不要だが、DDoS シミュレーションテストには Shield Advanced が必要。 |        |
| テスト環境の構築方針はありますか？<br />（本番同等 / 縮小構成 / オンデマンド） | IaC で本番同等のテスト環境をオンデマンドに構築・破棄できる。<br />コスト削減のために縮小構成で実施し、スケーリング特性を係数で補正する方法もある。 |        |
| パフォーマンスベースラインは定義されていますか？ | ベースラインを定義しておくことで、リリースごとの性能劣化を検知できる。<br />CloudWatch Application Signals の SLO で継続的にパフォーマンスを監視できる。 |        |
