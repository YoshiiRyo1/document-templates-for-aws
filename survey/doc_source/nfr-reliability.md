# 信頼性 (Reliability)

## 稼働率

| 質問                                                   | 質問の意図                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | ご回答 |
| ------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------ |
| システムごとの重要度を設定していますか？               | システムが提供している機能ごとに重要度が違う。重要度ごとに運用レベルを定義する。                                                                                                                                                                                                                                                                                                                                                                                                     |        |
| システムごとの運用時間を定義していますか？             | オンライン/バッチを含みシステムが稼働している時間を定義する。メンテナンスは運用時間を避けて実施するよう設計する。「とりあえず24時間」のようなシステムは多いが、AWS の場合はユーザーが避けられないメンテナンスがあるので「とりあえず24時間」は金額がかさむことを丁寧に説明すること。                                                                                                                                                                                                  |        |
| システムごと、重要度に応じた稼働率を定義していますか？ | オンプレミスでの稼働率は考えないことにする。AWSのベストプラクティスに合わせた現実的な稼働率を定義し直す。<br />EC2 SLA: Single-AZ 99.5%、Multi-AZ 99.99%。RDS SLA: Single-AZ 99.5%、Multi-AZ 99.95%。<br />各サービスの SLA はコンポジット SLA（複合 SLA）として組み合わせて評価する。<br />もし本当に稼働率を 99.99% 以上にしたいなら Multi-AZ 必須なうえに障害から自動で復旧させる仕組みを考える。マルチリージョン構成も検討の対象とする。 |        |
| 定期的な計画停止を定義していますか？                   | ・AWSが行うメンテナンスがあり、場合によっては避けられない<br />・スケールアップ/ダウンは原則としてインスタンス停止になる<br />・重要なパッチの適用に再起動が伴う<br />このようなケースでも稼働率を下げないように月次または年次の計画停止を盛り込んでおく。計画停止はメンテナンスの予定が無ければスキップしてよい。                                                                                                                                                                   |        |
| システム全体のコンポジット SLA（複合 SLA）を算出していますか？ | 複数のAWSサービスを組み合わせたシステムの稼働率は、各サービスの SLA を掛け合わせて算出する。<br />例: EC2 Multi-AZ (99.99%) × RDS Multi-AZ (99.95%) = 99.94%。<br />構成要素が増えるほどコンポジット SLA は下がるため、冗長化や非同期設計で緩和する。 |        |

## バックアップ / リストア

| 質問                                                                                                                                              | 質問の意図                                                                                                                                                                                                                                                                                                             | ご回答 |
| ------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ |
| RPO（目標復旧時点）は定義されていますか？                                                                                                         | スナップショット取得間隔に関係する。<br />10分前に戻りたいなら10分おきにスナップショットを取得するが、コストとのバランスをとること。<br />AWS Backup で一元管理すると複数サービスのバックアップポリシーを統一できる。<br />RDBMS on EC2 の場合は、製品ネイティブのバックアップ機能で RPO を準拠できるようセッティングを行う。                                                                           |        |
| RTO（目標復旧時間）は定義されていますか？                                                                                                         | インフラをリストアする時間だけではなく、アプリケーションをリストアする時間も考慮する。<br />例えば、スナップショットからリストア後に最新バージョンのデプロイが必要ならその所要時間や手順自動化も考えておく。<br />障害原因特定に要する時間は制御が難しいと思われるので、復旧作業の時間に関する目標を確認してはどうか？ |        |
| RLO（目標復旧レベル）は定義されていますか？                                                                                                       | どこまでリストアできれば復旧と言えるかを定義する。<br />例えば、主要な機能のリストアが数時間、補助機能は翌日という考えもあり。<br />現実的なレベルにしておくこと。                                                                                                                                                     |        |
| システムの重要度に合わせて RPO、RTO、RLOは定義されていますか？                                                                                    | RPO、RTO、RLOの実現はコストに直結するため、システム重要度に合わせて定義する。                                                                                                                                                                                                                                          |        |
| バックアップに対する要件をご教示ください。<br />・インシデントに備えたバックアップ<br />・ファイル保管要件に対応するバックアップ                  | 障害に備えるバックアップもあれば、ファイルの長期保管に備えるバックアップもある。<br />どのようなバックアップが必要なのかを明らかにしておく。<br />AWS Backup で EBS、RDS、DynamoDB、EFS、S3、EKS 等のバックアップを一元管理できる。<br />GuardDuty Malware Protection と統合し、復旧前にバックアップのマルウェアスキャンを実施できる。                                                                                                                                                                           |        |
| 保存期間 / 世代は定義されていますか？<br />ただし、コンプライアンス対応のためのアーカイブとは混同しないように留意                                 | インフラの障害によるボリュームの破損はすぐに気がつけるが、アプリケーションのバグや不備によるデータの不整合などは発見しにくいと思われる。                                                                                                                                                                               |        |
| データをリストアするときの粒度はどのレベルになりますでしょうか？<br />・ボリューム<br />・ファイル<br />・データベース (スキーマ、テーブル、全体) | リストアの粒度に応じてバックアップ手段を検討する。<br />データベースは製品ネイティブな機能でエクスポートしてもらう。そのタイミングとAWSでのバックアップタイミングは足並みを揃える。                                                                                                                                    |        |
| クロスアカウントまたはクロスリージョンへのバックアップコピーは必要ですか？ | AWS Backup でクロスアカウント・クロスリージョンへのバックアップコピーを自動化できる。<br />単一アクションで DB スナップショットのクロスリージョン・クロスアカウントコピーが可能。<br />アカウント侵害やリージョン障害に備え、バックアップデータを分離して保護する。 |        |
| イミュータブルバックアップ（変更不可バックアップ）は必要ですか？ | AWS Backup Vault Lock を使用するとバックアップの削除や変更を防止できる。<br />ランサムウェア対策やコンプライアンス要件（WORM: Write Once Read Many）への対応として有効。 |        |
| バックアップデータの論理的エアギャップ保護（Logically Air-Gapped Vault）は必要ですか？ | AWS Backup の Logically Air-Gapped Vault でバックアップデータを論理的に隔離し、アカウント侵害時もデータを保護できる。<br />Multi-party Approval により複数の承認者の同意がなければ復旧操作を実行できない。<br />直接バックアップ先として指定でき、コピー不要で運用を簡素化できる。<br />イミュータブルバックアップ（Vault Lock）と組み合わせて多層防御を実現する。 |        |

## 災害対策

| 質問                                                                 | 質問の意図                                                                                                                                                                                                                                                                                                                                                                                             | ご回答 |
| -------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------ |
| DR/災害対策を講じる必要はございますか？                              | Multi-AZ・Multi Regionなど、構成を決めるためのインプット。<br />リージョンレベルの冗長化だけでなく、オペレーションの体制も検討する必要がある。<br />AWS Elastic Disaster Recovery (DRS) で継続的レプリケーションによる低 RTO/RPO の DR を実現できる。<br />Route 53 Application Recovery Controller (ARC) でリージョン間フェイルオーバーを制御できる。                                                                                                                                                                                                                                                         |        |
| DRが発動する「災害」の定義を教えてください。                         | 何をもってしてDR発動とするかを聞く。対策のレベル感が決まる。 <br /> - 大規模な自然災害による社会インフラ (電気やネットワークなど) の停止<br /> - 大規模な自然災害による自社建屋の崩壊 (ハイブリット構成、Direct Connect の前提など)<br /> - 人的エラーによるデータ損失、サービス停止<br /> - AWS 起因による特定リソースの停止<br /> - 悪意のある第三者による攻撃を受けたサービス停止やサイト改ざんなど<br /> - ランサムウェア等のサイバー攻撃によるデータ暗号化・システム停止 |        |
| DR復旧時間目標を教えてください。                                     | 災害の定義によって復旧時間は異なる。<br />関東近郊の大規模災害 (東京リージョン全滅) なのに数時間で復旧などは相当な費用がかかる。                                                                                                                                                                                                                                                                       |        |
| DR復旧レベルを教えてください。                                       | DR発動時、どのサービスがどのレベルまで復旧できていればよいか？<br />どのレベルまで復旧させるかはコストに関わってくる。                                                                                                                                                                                                                                                                                 |        |
| DR事象発生後、切り替え実施を判断するまでの猶予時間をご教示ください。 | Active-Active な DR 構成なら猶予時間を短くできる。 <br />DR発生でも通常ロケーションで復旧を試みるほうが復旧が速いケースはある。                                                                                                                                                                                                                                                                        |        |
| どの DR 戦略パターンを採用しますか？<br />・Backup & Restore<br />・Pilot Light<br />・Warm Standby<br />・Multi-Site Active-Active | コスト・RTO・RPO のバランスで戦略を選択する。<br />Backup & Restore は最も低コストだが RTO が長い。Multi-Site Active-Active は最も高コストだが RTO/RPO が最小。<br />AWS Elastic Disaster Recovery は Pilot Light〜Warm Standby の実現に活用できる。 |        |
| レジリエンステスト（カオスエンジニアリング）を実施する予定はありますか？ | AWS Fault Injection Service (FIS) で障害注入テストを自動化できる。<br />AWS Resilience Hub でアプリケーションの回復力を評価し、改善推奨を取得できる。<br />定期的なテストにより、想定通りに復旧できることを検証する。 |        |
| DR 訓練の頻度と実施体制を定義していますか？ | DR 計画は訓練しないと実効性が保証できない。<br />年1回以上の訓練を推奨し、訓練結果をもとに手順や体制を改善する。 |        |
