# 運用上の優秀性 (Operational Excellence)

## 運用体制・運用維持管理

| 質問                                                                                                       | 質問の意図                                                                                                                                                                                                                  | ご回答 |
| ---------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ |
| 基盤運用および運用管理を実施する体制を教えてください。（CCoE / SRE / Platform Engineering / インフラ・基盤担当チーム など） | 設計や実装のスコープについて「現実的な範囲」を検討するためのインプットとする。                                                                                                                                              |        |
| （上記のメンバーについて）AWSに関するスキルはどの程度お持ちでしょうか？                                    | 必要に応じてトレーニングの受講を提案する。                                                                                                                                                                                  |        |
| 課題解決や障害対応、定常作業などのタスクを管理する仕組みはありますか？                                     | ある場合にはそのツールを前提のプロセスを設計する。<br />ない場合にはBacklogやJIRAなどのタスク管理サービスの利用を推奨。<br />成果を可視化することは運用の価値を評価するためにも必要。                                       |        |
| 定期的な運用レビューを実施する会議体はありますか？                                                         | ない場合には、設置の推奨と形骸化しないための運営方法を提案。                                                                                                                                                                |        |
| 業務上有益なナレッジ・手順・障害報告を共有する手段がありますか？                                           | ある場合にはそのツールを前提のプロセスを設計する。<br />ない場合、GitHub / Confluenceなどのサービスの利用を推奨。<br />障害やインシデントに関しては、レポートのフォーマットやレビューなどを定義して継続的改善を可能にする。 |        |
| システムメンテナンスに必要な作業は手順書化されていますでしょうか？                                         | AWSで新たに発生する運用手順を手順書化する。                                                                                                                                                                                 |        |
| 手順書を自動実行するツールを使用していますか？                                                             | ツールをAWSでも継続利用可能か？ RDSやLambdaなどに対応しているか？                                                                                                                                                           |        |
| メンテナンス作業を行うにあたりプロセスフローは定義されていますか？                                         | プロセスフローがクラウド運用にマッチしているものか？マッチさせる必要はあるか？                                                                                                                                              |        |
| システムイベントへの対応を自動化していますか？                                                             | イベントの復旧アクションを自動化しているか、する要件はあるか？<br />EventBridge + Lambda / Systems Manager Automation で自動復旧を実現できる。                                                                                                                                                              |        |
| IaC（Infrastructure as Code）の採用方針はありますか？ | CloudFormation、CDK、Terraform などのツールでインフラをコード管理する。<br />IaC により環境の再現性、変更履歴の管理、レビュープロセスの導入が可能になる。 |        |

## ジョブ管理

| 質問                                                                                 | 質問の意図                                                                                                                                                                                  | ご回答 |
| ------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ |
| ジョブ管理ツールの導入は必要でしょうか？                                             | ジョブネット、業務カレンダーなどのジョブ管理ツール特有の機能が必要であれば有償製品を選定する。<br />cron なら EventBridge Scheduler、ステートでのジョブ管理ならば Step Functions が活用できる。 |        |
| ジョブ管理ツールに求める機能をご教示ください。                                       | 同上。                                                                                                                                                                                      |        |
| ジョブの実行に失敗した場合、通知は必要ですか？<br />また、どこに通知するべきですか？ | リトライにも失敗した場合には手動での実行や原因調査が必要なため、原則通知するべき。誰に通知するべきかは体制次第。                                                                            |        |
| サーバーレスでのワークフロー管理は検討していますか？ | Step Functions でステートマシンベースのワークフローを構築できる。<br />EventBridge Pipes でイベント駆動のデータ連携パイプラインを構築できる。<br />サーバーレスにすることでジョブ管理サーバーの運用負荷を削減する。 |        |

## ログ管理

| 質問                                                                                                                                                                                                                                                                                                                                                                                    | 質問の意図                                                                                                                        | ご回答 |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------- | ------ |
| ログ管理が必要でしょうか？<br />管理対象のログをご教示ください。<br />・OS<br />・ミドルウェア（EC2上のログファイル、RDS、OpenSearch Service 等）<br />・アプリケーション（EC2上のファイル、Lambda、コンテナ (ECS/EKS) 等）<br />・ネットワーク（CloudFront、WAF、ELB、VPC Flow Logs 等）<br />・AWS（CloudTrail、VPC Flow Logs、S3、RDS 等）<br />・セキュリティ（GuardDuty、Config Rules、Security Hub 等） | 何をどこに保管するか。<br />AWSではどんなログが取得できて、どう活用するかの説明が必要。                                           |        |
| それぞれのログの利用目的をご教示ください。                                                                                                                                                                                                                                                                                                                                              | 監査目的、障害調査、アクセス分析などログごとの目的を知り、最適な保管場所を決定する。                                              |        |
| 保管期間は定義されていますでしょうか？                                                                                                                                                                                                                                                                                                                                                  | 保管要件を遵守する。また保管期間はAWS利用料金に影響してくる。                                                                     |        |
| ログ分析の必要はありますでしょうか？<br />どのログをどの粒度で分析するか定義されていますでしょうか？                                                                                                                                                                                                                                                                                    | Athena、CloudWatch Logs Insights、QuickSight、OpenSearch Service、3rd party tool などの選択肢がある。<br />セキュリティ系ログは Security Lake（OCSF 形式）に集約し Athena や OpenSearch で分析できる。 |        |
| ログの集約・正規化の方針はありますか？ | Security Lake で AWS サービスログを OCSF（Open Cybersecurity Schema Framework）形式に正規化し一元管理できる。<br />正規化により異なるソースのログを横断的に分析可能になる。 |        |
| マルチアカウント構成の場合、ログの集約先は決まっていますか？ | 専用のログ集約アカウントに CloudTrail、Config、VPC Flow Logs 等を集約することを推奨する。<br />Organizations の委任管理者機能でセキュリティサービスのログ集約を一元化できる。 |        |

## 監視・オブザーバビリティ

| 質問                                                                                                                                                                     | 質問の意図                                                                                                                                                                                              | ご回答 |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ |
| リソース監視を行いますか？<br />その場合の指標はございますか？<br />CPU使用率/メモリ使用率/ディスク使用率/アクセス数/転送量など、AWSリソースに対する監視を示しています。 | CloudWatch & Agent で完結するか、しなければ 3rd party tool を検討。                                                                                                                                     |        |
| OS上のサービスまたはプロセス監視を行いますか？<br />その場合の指標はございますか？<br />AWSマネージドサービスやサーバーレスを使う場合は対象外です。                      | CloudWatch & Agent で完結するか、しなければ 3rd party tool を検討。                                                                                                                                     |        |
| AWSリソースの死活監視を行いますか？                                                                                                                                      | ping 監視は効果が薄い。AWS Health Dashboard や CloudWatch で死活を監視する。                                                                                                                                                |        |
| フロントエンド監視を行いますか？<br />その場合の指標はございますか？                                                                                                     | 外形監視はサービスの稼働状態を知るために必要。                                                                                                                                                          |        |
| アプリケーション監視を行いますか？<br />その場合の指標はございますか？                                                                                                   | 外形監視で一気通貫に確認できるとよい。<br />CloudWatch Application Signals でアプリケーションの SLO/SLI を自動計測できる。<br />AWS X-Ray で分散トレーシングを実現し、ボトルネックを可視化できる。<br />アプリケーションは個別に監視しないとならないことが多いのでヒアリングしておく。                                                                              |        |
| ビジネスKPIを計測していますか？                                                                                                                                          | ビジネスKPIで必要な指標に対して、ITとしてどのメトリクスを提供すべきか。                                                                                                                                 |        |
| 通知するメトリクス、しきい値は定義されていますでしょうか？                                                                                                               | オオカミ少年にならないように通知は必要最低限に留める。<br />通知先は緊急と通常の2通り用意する。<br />サービスダウンなど人間による即時対処が必要なものを緊急にする。日中帯の対応でよいものは通常にする。 |        |
| 通知方法はどのような想定でしょうか？<br />メール、チャットツール、電話、チケットツール、統合管理ツールなど。                                                             | AWSから通知先への手段はアーキテクチャ設計に関わる。<br />メールやSlackは実装容易、電話やチケットツールへの連携は構築作業が必要。                                                                        |        |
| 通知すべきイベントと通知先は定義していますか？<br />（「障害」を定義していますか？）                                                                                     | イベントが対処すべきチームへ適切に届くようにする。<br />そもそも、何を障害と見なすか定義するべき。                                                                                                      |        |
| アラート通知に重要度は設定していますか？                                                                                                                                 | 緊急アラートと参考情報アラートを分離して、アラート自体がオオカミ少年にならないようにする。                                                                                                              |        |
| アラート重要度に応じて通知先を定義していますか？                                                                                                                         | 緊急は電話、参考情報はメールなど。                                                                                                                                                                      |        |
| メトリクス・ログ・トレースを統合的に管理する方針はありますか？ | オブザーバビリティの3本柱（メトリクス、ログ、トレース）を CloudWatch、X-Ray で統合管理できる。<br />CloudWatch Container Insights、Lambda Insights で各コンピュート環境のオブザーバビリティを強化する。 |        |
| エンドユーザーの体験を監視する仕組みは必要ですか？ | Amazon CloudWatch Internet Monitor でインターネット経由のパフォーマンスや可用性を監視できる。<br />CloudWatch Synthetics でユーザーシナリオを模した外形監視を自動実行できる。 |        |
| インシデント発生時の対応フローは定義されていますか？ | AWS Systems Manager Incident Manager でインシデントの検知・エスカレーション・対応・振り返りを一元管理できる。<br />オンコール体制、エスカレーションパス、コミュニケーション手段を定義する。 |        |

## アプリケーションデプロイ

| 質問                                                                         | 質問の意図                                                                                 | ご回答 |
| ---------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------ | ------ |
| アプリケーションのビルド方法について、クラウド最適化する予定はございますか？ | デプロイの方法・問題発生時のロールバック方法・テスト方法などの定義を行う必要があるか確認。<br />CodePipeline V2、CodeBuild、ECR/ECS パイプラインなどの AWS CI/CD サービスを検討する。 |        |
| アプリケーションのデプロイについて、クラウド最適化する予定はございますか？   | デプロイの方法・問題発生時のロールバック方法・テスト方法などの定義を行う必要があるか確認。<br />CodeDeploy による EC2/ECS/Lambda へのデプロイ自動化を検討する。   |        |
| アプリケーションコードのバージョン管理ツールは使用していますか？             | AWSサービスとの統合を考慮。                                                                |        |
| アプリケーションのテストを自動化するツールを使用していますか？               | AWSサービスとの統合を考慮。                                                                |        |
| デプロイのロールバックを容易にしていますか？                                 | デプロイの方法・問題発生時のロールバック方法・テスト方法などの定義を行う必要があるか確認   |        |
| デプロイ戦略は定義されていますか？<br />（Blue/Green / Canary / Rolling / All at Once） | リスク許容度とダウンタイム許容度に応じてデプロイ戦略を選択する。<br />CodeDeploy で Blue/Green・Canary デプロイを自動化できる。ECS や Lambda のトラフィックシフトにも対応。 |        |
| インフラの変更を CI/CD パイプラインで管理する予定はありますか？ | IaC テンプレートを Git で管理し、変更をプルリクエスト → レビュー → 自動テスト → デプロイのパイプラインで適用する。<br />CloudFormation StackSets / CDK Pipelines でマルチアカウント・マルチリージョンのデプロイを自動化できる。 |        |
