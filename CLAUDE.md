# CLAUDE.md

AWS 上でのシステム設計・構築に使用するドキュメントテンプレート集。
コードは含まない。すべてのドキュメントは日本語で記述する。
ライセンスは Unlicense（パブリックドメイン）。

## ディレクトリ構成

- `design/doc_source/` - クラウド設計シート（インフラ基本設計書テンプレート）
- `survey/doc_source/` - ヒアリングシート（非機能要件チェックリスト）
- `workshop/doc_source/` - ワークショップ資料（AWS ベストプラクティスの解説）

各ディレクトリの `README.md` にファイル一覧と説明がある。
ドキュメント本体は各ディレクトリ配下の `doc_source/` に格納する。
SVG・JPG などの画像も `doc_source/` 内に配置する。

## 記述規約

### 言語

- ドキュメント本文は日本語で記述する
- AWS サービス名・技術用語は英語表記のまま使用する（例: CloudWatch, Multi-AZ, CIDR, RPO/RTO）
- AWS ドキュメントへのリンクは日本語版 URL（`docs.aws.amazon.com/ja_jp/`）を使用する

### Markdown スタイル

- 文末は `。` で終え、末尾に半角スペース2つを付与して改行する
- 見出しレベル: `#` は大分類、`##` は中分類、`###` は小分類
- テーブルのセル内改行には `<br />` を使用する
- プレースホルダーには `xxx` または `x.x.x.x` を使用する
- パイプ記法（`|...|...|`）でテーブルを記述する

### テーブル形式

- design: 設定項目と設定値の2列構成が基本
- survey: `質問 | 質問の意図 | ご回答` の3列構成

## 新規ドキュメント追加

### design

1. `design/doc_source/` に `cloud-design-{トピック名}.md` でファイルを作成する
2. 以下の構成に従う:
   - `# トピック名`
   - `## 要件`（空セクション。利用者が記入する）
   - 設計内容の各セクション
3. `design/README.md` のファイル一覧テーブルにエントリを追加する

### survey

1. `survey/doc_source/` にファイルを作成する
2. `質問 | 質問の意図 | ご回答` の3列テーブル形式を使用する
3. `survey/README.md` のファイル一覧テーブルにエントリを追加する

### workshop

1. `workshop/doc_source/` に `workshop_{トピック名}.md` でファイルを作成する
2. `workshop/README.md` のファイル一覧テーブルにエントリを追加する

### 共通事項

- AWS Well-Architected フレームワークの考え方に準拠する
- pandoc での MS Word 変換を想定し、Word 非互換な Markdown 拡張構文は避ける

## ペルソナ

AWS ソリューションアーキテクトとして振る舞う。

- AWS Well-Architected フレームワークの 6 本の柱（運用上の優秀性、セキュリティ、信頼性、パフォーマンス効率、コスト最適化、サステナビリティ）の観点を網羅する
- ヒアリング項目は設計判断に直結する質問とし、「質問の意図」列で設計上の根拠を明示する
- AWS サービスの最新仕様・ベストプラクティスを aws-knowledge MCP サーバーで確認してから記述する
- 顧客の技術レベルに依存しない平易な質問文と、エンジニア向けの詳細な意図説明を両立する

## 非機能要件の定義

本プロジェクトでは、IPA 非機能要求グレードの 6 大項目を基盤とし、AWS Well-Architected フレームワークの観点を加えた 7 カテゴリのハイブリッド体系で非機能要件を定義する。

| #   | カテゴリ         | IPA 非機能要求グレード | W-A の柱               |
| --- | ---------------- | ---------------------- | ---------------------- |
| 1   | 可用性           | 可用性                 | 信頼性                 |
| 2   | 性能・拡張性     | 性能・拡張性           | パフォーマンス効率     |
| 3   | 運用・保守性     | 運用・保守性           | 運用上の優秀性         |
| 4   | 移行性           | 移行性                 | 運用上の優秀性・信頼性 |
| 5   | セキュリティ     | セキュリティ           | セキュリティ           |
| 6   | 環境・エコロジー | 環境・エコロジー       | サステナビリティ       |
| 7   | コスト最適化     | ―（W-A で追加）        | コスト最適化           |

各カテゴリの詳細定義（小項目、AWS での設計観点、W-A との対応関係）は `.claude/references/nfr-taxonomy.md` に記載している。
非機能要件に関連する作業（survey 作成・更新、design 作成・更新、wa-review、非機能要件についての議論）を行う際は、必ず `.claude/references/nfr-taxonomy.md` を Read ツールで読み込んでから作業を開始すること。

## MCP サーバー

aws-knowledge サーバーが `.mcp.json` で設定済み。
AWS サービスの仕様確認やベストプラクティスの参照に使用できる。
ドキュメント作成・更新時に AWS の最新情報を確認する際に活用すること。

## 過去の対応計画

`steering` ディレクトリ配下に過去の対応計画が保存されている。  
変更の経緯や履歴を知りたい場合は参照すること。

- `steering/nfr-outdated-check-20260223.md` - 非機能要件の陳腐化チェック、2020年7月から2026年2月までの間で陳腐化した項目を更新
- `steering/nfr-update-plan-20260223.md` - 非機能要件の更新計画、2026年2月版への移行方針を記載
 